---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";

// Obtener posts destacados del blog
let allPosts: CollectionEntry<"blog">[] = [];
let featuredPosts: CollectionEntry<"blog">[] = [];

try {
  allPosts = await getCollection("blog");
  featuredPosts = allPosts
    .filter((post) => post.data.featured)
    .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
    .slice(0, 3);
} catch (error) {
  console.log("No se pudieron cargar los posts del blog:", error);
}
---

<BaseLayout
  title="Inicio - Mi Sitio Web"
  description="Bienvenido a nuestro sitio web profesional. Ofrecemos servicios de calidad y contenido valioso."
>
  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1>Bienvenido a Nuestro Sitio Web</h1>
        <p class="hero-description">
          Ofrecemos soluciones profesionales para hacer crecer tu negocio.
          Descubre nuestros servicios y lee nuestro blog para mantenerte
          actualizado.
        </p>
        <div class="hero-buttons">
          <a href="/servicios" class="btn">Ver Servicios</a>
          <a href="/contacto" class="btn btn-secondary">Cont√°ctanos</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Servicios Preview -->
  <section class="section">
    <div class="container">
      <div class="text-center mb-12">
        <h2>Nuestros Servicios</h2>
        <p>Soluciones profesionales adaptadas a tus necesidades</p>
      </div>
      <div class="services-grid">
        <div class="service-card">
          <div class="service-icon">
            <svg
              width="48"
              height="48"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M12 2L2 7v10c0 5.55 3.84 10 9 11 1.09-.21 2.11-.63 3-1.18.89.55 1.91.97 3 1.18 5.16-1 9-5.45 9-11V7l-10-5z"
              ></path>
              <path d="M8 11h8v2H8z"></path>
              <path d="M8 7h8v2H8z"></path>
              <path d="M8 15h5v2H8z"></path>
            </svg>
          </div>
          <h3>Desarrollo Web</h3>
          <p>
            Creamos sitios web modernos y funcionales que impulsan tu presencia
            online.
          </p>
          <a href="/servicios" class="service-link">Saber m√°s ‚Üí</a>
        </div>

        <div class="service-card">
          <div class="service-icon">
            <svg
              width="48"
              height="48"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <h3>Consultor√≠a</h3>
          <p>
            Te ayudamos a definir estrategias digitales efectivas para tu
            negocio.
          </p>
          <a href="/servicios" class="service-link">Saber m√°s ‚Üí</a>
        </div>

        <div class="service-card">
          <div class="service-icon">
            <svg
              width="48"
              height="48"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7Z"
              ></path>
            </svg>
          </div>
          <h3>Marketing Digital</h3>
          <p>
            Aumenta tu visibilidad online con nuestras estrategias de marketing
            digital.
          </p>
          <a href="/servicios" class="service-link">Saber m√°s ‚Üí</a>
        </div>
      </div>
      <div class="text-center">
        <a href="/servicios" class="btn">Ver Todos los Servicios</a>
      </div>
    </div>
  </section>

  <!-- Blog Preview -->
  {
    featuredPosts.length > 0 && (
      <section class="section section-bg">
        <div class="container">
          <div class="text-center mb-12">
            <h2>Art√≠culos Destacados</h2>
            <p>Mantente al d√≠a con nuestro contenido m√°s reciente</p>
          </div>
          <div class="blog-grid">
            {featuredPosts.map((post) => (
              <article class="blog-card">
                <div class="blog-card-content">
                  <h3>
                    <a href={`/blog/${post.slug}`}>{post.data.title}</a>
                  </h3>
                  <p>{post.data.description}</p>
                  <div class="blog-meta">
                    <span class="blog-author">Por {post.data.author}</span>
                    <span class="blog-date">
                      {post.data.date.toLocaleDateString("es-ES", {
                        year: "numeric",
                        month: "long",
                        day: "numeric",
                      })}
                    </span>
                  </div>
                  <a href={`/blog/${post.slug}`} class="read-more">
                    Leer m√°s ‚Üí
                  </a>
                </div>
              </article>
            ))}
          </div>
          <div class="text-center">
            <a href="/blog" class="btn">
              Ver Todos los Art√≠culos
            </a>
          </div>
        </div>
      </section>
    )
  }

  <!-- Caracter√≠sticas -->
  <section class="section">
    <div class="container">
      <div class="text-center mb-12">
        <h2>¬øPor qu√© elegirnos?</h2>
        <p>Razones para confiar en nuestros servicios</p>
      </div>
      <div class="features-grid">
        <div class="feature-item">
          <div class="feature-icon">üöÄ</div>
          <h3>Resultados R√°pidos</h3>
          <p>
            Implementamos soluciones que generan resultados visibles en poco
            tiempo.
          </p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üí°</div>
          <h3>Innovaci√≥n Constante</h3>
          <p>
            Utilizamos las √∫ltimas tecnolog√≠as y tendencias del mercado digital.
          </p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üéØ</div>
          <h3>Enfoque Personalizado</h3>
          <p>
            Cada proyecto es √∫nico y adaptado a las necesidades espec√≠ficas del
            cliente.
          </p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">ü§ù</div>
          <h3>Soporte Continuo</h3>
          <p>
            Te acompa√±amos en todo el proceso y brindamos soporte
            post-lanzamiento.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section">
    <div class="container">
      <div class="cta-content">
        <h2>¬øListo para comenzar?</h2>
        <p>
          Cont√°ctanos hoy mismo y descubre c√≥mo podemos ayudarte a alcanzar tus
          objetivos.
        </p>
        <a href="/contacto" class="btn btn-large">Contactar Ahora</a>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .hero {
    background: linear-gradient(
      135deg,
      var(--color-primary) 0%,
      var(--color-primary-dark) 100%
    );
    color: white;
    padding: var(--spacing-16) 0;
    text-align: center;
    min-height: 70vh;
    display: flex;
    align-items: center;
  }

  .hero-content h1 {
    font-size: var(--font-size-4xl);
    margin-bottom: var(--spacing-6);
    color: white;
    font-weight: 700;
  }

  .hero-description {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-8);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
  }

  .hero-buttons {
    display: flex;
    gap: var(--spacing-4);
    justify-content: center;
    flex-wrap: wrap;
  }

  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-8);
    margin-bottom: var(--spacing-8);
  }

  .service-card {
    background: white;
    padding: var(--spacing-8);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow);
    text-align: center;
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease;
    border: 1px solid #e2e8f0;
  }

  .service-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
  }

  .service-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(
      135deg,
      var(--color-primary),
      var(--color-primary-dark)
    );
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto var(--spacing-6);
    color: white;
  }

  .service-card h3 {
    margin-bottom: var(--spacing-4);
    color: var(--text-primary);
    font-size: var(--font-size-xl);
  }

  .service-card p {
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: var(--spacing-6);
  }

  .service-link {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
  }

  .service-link:hover {
    color: var(--color-primary-dark);
  }

  .blog-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: var(--spacing-8);
    margin-bottom: var(--spacing-8);
  }

  .blog-card {
    background: white;
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow);
    overflow: hidden;
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease;
  }

  .blog-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }

  .blog-card-content {
    padding: var(--spacing-6);
  }

  .blog-card h3 {
    margin-bottom: var(--spacing-3);
  }

  .blog-card h3 a {
    color: var(--text-primary);
    text-decoration: none;
    font-size: var(--font-size-lg);
  }

  .blog-card h3 a:hover {
    color: var(--color-primary);
  }

  .blog-card p {
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: var(--spacing-4);
  }

  .blog-meta {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-sm);
    color: var(--text-light);
    margin-bottom: var(--spacing-4);
  }

  .read-more {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
  }

  .read-more:hover {
    color: var(--color-primary-dark);
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-8);
  }

  .feature-item {
    text-align: center;
    padding: var(--spacing-6);
  }

  .feature-icon {
    font-size: 3rem;
    margin-bottom: var(--spacing-4);
  }

  .feature-item h3 {
    margin-bottom: var(--spacing-3);
    color: var(--text-primary);
  }

  .feature-item p {
    color: var(--text-secondary);
    line-height: 1.6;
  }

  .cta-content {
    text-align: center;
    background: var(--bg-secondary);
    padding: var(--spacing-12);
    border-radius: var(--border-radius-lg);
  }

  .cta-content h2 {
    margin-bottom: var(--spacing-4);
    color: var(--text-primary);
  }

  .cta-content p {
    margin-bottom: var(--spacing-6);
    font-size: var(--font-size-lg);
    color: var(--text-secondary);
  }

  .btn-large {
    padding: var(--spacing-4) var(--spacing-8);
    font-size: var(--font-size-lg);
  }

  @media (max-width: 768px) {
    .hero {
      padding: var(--spacing-12) 0;
      min-height: 60vh;
    }

    .hero-content h1 {
      font-size: var(--font-size-3xl);
    }

    .hero-buttons {
      flex-direction: column;
      align-items: center;
    }

    .services-grid,
    .blog-grid {
      grid-template-columns: 1fr;
    }

    .features-grid {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }

    .blog-meta {
      flex-direction: column;
      gap: var(--spacing-1);
    }
  }
</style>
